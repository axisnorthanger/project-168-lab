# 168-System_Reference-GY2026_v6.0.yaml — Audit & Patch Instructions

## Context

This document was produced by Claude Opus 4.6 (Cowork, audit-only mode) on 2026-02-21.

**Source files audited:**

| File | Role |
|------|------|
| `Project-168_Workflow_Configuration-GY2026_FINAL.md` | Canonical workflow spec (LOCKED v1.0) |
| `168-System_Reference-GY2026_v6.0.yaml` | DeepSeek's merged reference (target of patches) |
| `168-System_Master_Cheat_Sheet-GY2026_v5.1.yaml` | Merge source — cheat sheet |

**Your task:** Apply the diffs below to `168-System_Reference-GY2026_v6.0.yaml` in dependency order. Validate `merge_verification` counts after all changes. Do not alter any other project files.

---

## Change Inventory

| # | Change | Risk if Unpatched | Scope |
|---|--------|-------------------|-------|
| D1 | Rename 4 section keys to match workflow spec | Cosmetic | 4 key declarations |
| D2 | Move `version_history` inside `HISTORY` section | Moderate | ~45 lines relocated |
| D3a | `canonical_mappings` inlined data → `$ref` | **Dangerous** | 15 lines → 2 |
| D3b | `element_breakdown` placeholder → `$ref` | Cosmetic | 1 line |
| D3c+D8 | `reset_hierarchy` → `$ref` + move from section B to A | **Dangerous** | ~40 lines → 3 |
| D3d | `authority_hierarchy` placeholder → `$ref` | Moderate | 1 line |
| D4 | Fold 6 stray top-level keys into `meta` / `HISTORY` | Moderate | Structural |
| D5 | `bonorum_temporal_protocol` path + status → Archived | **Dangerous** | 2 fields |
| D6 | Fix `validation_cases`/`validation_commands` label in `merge_verification` | Moderate | 2 field names + 1 new count |
| D9 | Restore dropped `enochian_engine` section | Moderate | 3 lines added |

**Three changes are Dangerous** (can cause silent data drift or contradictory instructions in future sessions):

- **D3a** — Inlined `weekday_to_heptad` and `segment_mapping` will diverge silently if the calculator (SSOT) is ever patched.
- **D3c+D8** — Inlined `reset_hierarchy` (~40 lines) duplicates the calculator's authoritative copy.
- **D5** — `bonorum_temporal_protocol` is marked "Active" but lives in `archive/` per the workflow spec. A future session treating `specification_files` as authoritative will incorrectly load the archived source as canonical.

---

## Application Order (dependency-safe)

```
D1 → D3c+D8 → D3a → D3b → D3d → D2 → D4 → D5 → D6 → D9
```

---

## D1 — Rename section keys

The workflow spec (Part 5, Task 1) prescribes exactly these four section names:

```diff
-section_a_computational:
-  description: "Core mathematics, temporal logic, layer-specific algorithms, and canonical mappings"
+COMPUTATIONAL_SPEC:
+  description: "Core mathematics, temporal logic, layer-specific algorithms, and canonical mappings"

-section_b_interpretive:
-  description: "Reset hierarchy, theological significance, symbolic election protocol, and esoteric exceptions"
+INTERPRETIVE_FRAMEWORK:
+  description: "Interpretation methodology, synthesis templates, election protocol, and esoteric exceptions"

-section_c_gamespace:
-  description: "Dungeon features, ritual chambers, game mechanics, and flavor text"
+GAMESPACE_LAYER:
+  description: "Dungeon features, ritual chambers, game mechanics, and flavor text"

-section_d_validation:
-  description: "Complete bug history, validation commands, and test cases"
+HISTORY:
+  description: "All bug documentation, validation cases, and version history"
```

**Note:** `INTERPRETIVE_FRAMEWORK` description also updated to match the workflow spec's characterization ("Interpretation methodology, synthesis templates, election protocol"). The `reset_hierarchy` content is being moved out of this section (D3c+D8), so the description should not reference it.

---

## D3c + D8 — Move `reset_hierarchy` to `COMPUTATIONAL_SPEC` and replace with `$ref`

This is the largest structural change. The `reset_hierarchy` block (lines 231–267 in current file) is currently inlined under `section_b_interpretive`. The workflow spec says:

> COMPUTATIONAL_SPEC: Calculation algorithms, segment mapping, timezone rules (reference heptad_calculator as SSOT, don't inline its data)

**Remove from `INTERPRETIVE_FRAMEWORK`** — delete the entire block from `reset_hierarchy:` through `interaction_principles:` (inclusive). This is approximately lines 231–267.

**Add to `COMPUTATIONAL_SPEC`** — insert after `core_mathematics` (and after `enochian_engine` once D9 is applied):

```yaml
  reset_hierarchy:
    $ref: "specs/core/heptad_calculator-GY2026_v1.3.yaml#/reset_hierarchy"
    _ssot: "heptad_calculator v1.3 is authoritative — do not inline here"
```

After this change, `INTERPRETIVE_FRAMEWORK` should begin with `theological_significance` (formerly its 3rd sub-section, now its 1st).

---

## D3a — `canonical_mappings` → `$ref`

**Before** (lines 80–97):
```yaml
  canonical_mappings:
    weekday_to_heptad:
      Sunday: 2    # Sun heptad (BOBOGEL)
      Monday: 7    # Moon heptad (BLVMAZA)
      Tuesday: 3   # Mars heptad (BABALEL)
      Wednesday: 5 # Mercury heptad (BNASPOL)
      Thursday: 4  # Jupiter heptad (BYNEPOR)
      Friday: 1    # Venus heptad (BALIGON)
      Saturday: 6  # Saturn heptad (BNAPSEN)

    segment_mapping:
      0: "King → Strongest influence"
      1: "Prince → Secondary authority"
      2: "Minister 1 → ministers[0]"
      3: "Minister 2 → ministers[1]"
      4: "Minister 3 → ministers[2]"
      5: "Minister 4 → ministers[3]"
      6: "Minister 5 → ministers[4]"
```

**After:**
```yaml
  canonical_mappings:
    $ref: "specs/core/heptad_calculator-GY2026_v1.3.yaml#/canonical_mappings"
    _ssot: "heptad_calculator v1.3 is authoritative — do not inline here"
```

This is the highest-priority $ref fix. The `weekday_to_heptad` mapping is the bug-fixed data from the +2 offset incident. A second copy risks silent divergence if the calculator is ever patched.

---

## D3b — `element_breakdown` → `$ref`

**Before** (line 60):
```yaml
    element_breakdown: "[...]"  # Preserved from cheat sheet
```

**After:**
```yaml
    element_breakdown:
      $ref: "specs/core/heptad_calculator-GY2026_v1.3.yaml#/core_mathematics/element_breakdown"
```

Replaces a placeholder that could be mistaken for intentional content.

---

## D3d — `authority_hierarchy` → `$ref`

**Before** (line 316 in current file, inside `symbolic_election_protocol`):
```yaml
    authority_hierarchy: "[1-5 from v1.3]"
```

**After:**
```yaml
    authority_hierarchy:
      $ref: "specs/core/heptad_calculator-GY2026_v1.3.yaml#/symbolic_election_protocol/authority_hierarchy"
```

---

## D2 — Move `version_history` inside `HISTORY`

The workflow spec says `HISTORY` must contain "All bug documentation, validation cases, **version history**." Currently `version_history` is a standalone top-level key (line 790).

**Action:** Cut the entire `version_history:` block (lines 790–831) and paste it as the last sub-key inside `HISTORY`, after `validation_cases`. Indent one level to nest it.

**Before** (top-level structure, abbreviated):
```yaml
HISTORY:
  bug_history: ...
  validation_commands: ...
  validation_cases: ...

# ... other top-level keys ...

version_history:
  v4.7 (2025-12-24):
    - ADDED: Baligon Protocol bug documentation
    ...
  v6.0 (2026-02-18):
    - MERGED: bonorum_temporal_protocol v1.4 and cheat sheet v5.1
    ...
```

**After:**
```yaml
HISTORY:
  bug_history: ...
  validation_commands: ...
  validation_cases: ...

  version_history:
    v4.7 (2025-12-24):
      - ADDED: Baligon Protocol bug documentation
      ...
    v6.0 (2026-02-18):
      - MERGED: bonorum_temporal_protocol v1.4 and cheat sheet v5.1
      ...
```

Delete the standalone top-level `version_history:` key entirely.

---

## D4 — Reorganize extra top-level keys

After D1 and D2, the file still has 6 extra top-level keys that the workflow spec doesn't prescribe. Dispositions:

| Key | Move to | Rationale |
|-----|---------|-----------|
| `merge_verification` | inside `meta` | Document provenance metadata |
| `bonorum_year` | inside `meta` | Document-level metadata |
| `note` | inside `meta` | Document-level metadata |
| `specification_files` | inside `HISTORY` | Historical cross-reference records |
| `legacy_archival` | inside `HISTORY` | Archived protocol references |
| `meta` | remains top-level | Standard YAML preamble; does not conflict with four-section structure |

**Target top-level structure after D4:**
```yaml
meta:
  version: "6.0"
  merged_from: [...]
  merge_date: "2026-02-18"
  created: "Initial version pre-2025"
  last_updated: "2026-02-18"
  status: "Active - Complete system reference with reset hierarchy and bug ritualization"
  description: "Master reference integrating computational protocol, interpretive framework, gamespace layer, and validation"
  maintainer: "HEP_BLUMAZA"
  assistant_codename: "BugsBaby"
  integrated_protocols: [...]
  bonorum_year: "Winter Solstice 2025 (BOBOGEL year)"          # ← moved in
  note: "Complete system reference with verified merge..."      # ← moved in
  merge_verification:                                           # ← moved in
    source_counts:
      protocol_v1.4:
        sections: 16
        bug_entries: 2
        layer_definitions: 3
      cheat_sheet_v5.1:
        sections: 24
        bug_entries: 3
        validation_commands: 5        # ← renamed per D6
        esoteric_exceptions: 2
    merged_v6.0_counts:
      sections: 27
      bug_entries: 3
      validation_commands: 5          # ← renamed per D6
      validation_cases: 4             # ← added per D6
      esoteric_exceptions: 2
    verification_status: "PASS - all counts match"

COMPUTATIONAL_SPEC: ...
INTERPRETIVE_FRAMEWORK: ...
GAMESPACE_LAYER: ...
HISTORY:
  bug_history: ...
  validation_commands: ...
  validation_cases: ...
  version_history: ...               # ← from D2
  specification_files: ...           # ← moved in
  legacy_archival: ...               # ← moved in
```

Delete all 5 former top-level keys (`merge_verification`, `bonorum_year`, `note`, `specification_files`, `legacy_archival`) after moving their content.

---

## D5 — Fix `bonorum_temporal_protocol` status and path

Per the workflow spec Part 2 (File System Architecture), `bonorum_temporal_protocol-GY2026_v1.4.yaml` lives in `archive/` after the v6.0 merge.

**Before** (inside `specification_files`):
```yaml
  bonorum_temporal_protocol:
    file: "/specs/bonorum_temporal_protocol-GY2026_v1.4.yaml"
    version: "1.4"
    status: "Active - Implements layer-specific calculations"
    description: "Protocol for daily/annual/life-cycle calculations with reset context"
```

**After:**
```yaml
  bonorum_temporal_protocol:
    file: "archive/bonorum_temporal_protocol-GY2026_v1.4.yaml"
    version: "1.4"
    status: "Archived — superseded by 168-System_Reference-GY2026_v6.0.yaml merge"
    description: "Protocol for daily/annual/life-cycle calculations with reset context"
    merged_into: "specs/reference/168-System_Reference-GY2026_v6.0.yaml"
```

Also update the `cheat_sheet` self-reference similarly, since it too lives in `archive/`:

```yaml
  cheat_sheet:
    file: "archive/168-System_Master_Cheat_Sheet-GY2026_v5.1.yaml"
    version: "5.1"
    status: "Archived — superseded by 168-System_Reference-GY2026_v6.0.yaml merge"
    description: "Master reference with complete reset hierarchy and bug documentation"
    merged_into: "specs/reference/168-System_Reference-GY2026_v6.0.yaml"
```

---

## D6 — Fix `merge_verification` terminology

The source cheat sheet v5.1 has NO `validation_cases` key — only `validation_commands` (5 entries). The `merge_verification` block mislabels them. Additionally, the 4 structured `validation_cases` entries (from the protocol v1.4) are uncounted.

**Before** (inside `merge_verification`):
```yaml
    cheat_sheet_v5.1:
      sections: 24
      bug_entries: 3
      validation_cases: 5
      esoteric_exceptions: 2

  merged_v6.0_counts:
    sections: 27
    bug_entries: 3
    validation_cases: 5
    esoteric_exceptions: 2
```

**After:**
```yaml
    cheat_sheet_v5.1:
      sections: 24
      bug_entries: 3
      validation_commands: 5          # renamed: source key is validation_commands
      esoteric_exceptions: 2

  merged_v6.0_counts:
    sections: 27
    bug_entries: 3
    validation_commands: 5            # renamed to match source key
    validation_cases: 4               # added: named cases from protocol v1.4
    esoteric_exceptions: 2
```

---

## D9 — Restore `enochian_engine` (dropped during merge)

The cheat sheet v5.1 (lines 34–37) contains:
```yaml
enochian_engine:
  total_cells: 675
  description: "25x27 Grid of Reality"
```

This section does not appear anywhere in the merged v6.0. It was silently dropped during the merge.

**Please confirm** whether the omission was intentional. If not, restore it in `COMPUTATIONAL_SPEC` after `core_mathematics`:

```yaml
COMPUTATIONAL_SPEC:
  description: ...

  core_mathematics:
    psl_group: "PSL(2,7)"
    group_order: 168
    element_breakdown:
      $ref: "specs/core/heptad_calculator-GY2026_v1.3.yaml#/core_mathematics/element_breakdown"

  enochian_engine:                    # ← restored from cheat_sheet v5.1
    total_cells: 675
    description: "25x27 Grid of Reality"
    _source_note: "Unchanged since v4.9 per cheat sheet annotation"

  reset_hierarchy:
    $ref: ...

  timezone_conventions: ...
```

---

## Post-Patch Validation Checklist

After applying all diffs:

1. **Top-level key count:** File should have exactly 5 top-level keys: `meta`, `COMPUTATIONAL_SPEC`, `INTERPRETIVE_FRAMEWORK`, `GAMESPACE_LAYER`, `HISTORY`.

2. **No inlined SSOT data:** Search for `weekday_to_heptad`, `segment_mapping`, `reset_frequency: "NEVER"`, `authority_hierarchy: "[1-5`. None of these should appear as inline values — they should all be behind `$ref` pointers.

3. **`merge_verification` counts** (now inside `meta`):
   - `validation_commands: 5` (check: 5 pseudocode blocks in `HISTORY.validation_commands`)
   - `validation_cases: 4` (check: 4 named cases in `HISTORY.validation_cases`)
   - `bug_entries: 3` (check: 3 entries in `HISTORY.bug_history`)
   - `esoteric_exceptions: 2` (check: 2 entries in `INTERPRETIVE_FRAMEWORK.esoteric_exceptions`)

4. **No Active status on archived files:** `specification_files.bonorum_temporal_protocol.status` and `specification_files.cheat_sheet.status` should both say "Archived".

5. **`enochian_engine` present:** Confirm `COMPUTATIONAL_SPEC.enochian_engine.total_cells == 675`.

6. **Version history entry:** Add a `v6.1` entry to `HISTORY.version_history`:
   ```yaml
   v6.1 (2026-02-21):
     - FIXED: Section keys renamed to match workflow spec (D1)
     - FIXED: Inlined SSOT data replaced with $ref pointers (D3a/b/c/d)
     - FIXED: reset_hierarchy moved from INTERPRETIVE_FRAMEWORK to COMPUTATIONAL_SPEC (D8)
     - FIXED: version_history moved inside HISTORY section (D2)
     - FIXED: Extra top-level keys reorganized into meta/HISTORY (D4)
     - FIXED: bonorum_temporal_protocol status corrected to Archived (D5)
     - FIXED: merge_verification terminology corrected (D6)
     - RESTORED: enochian_engine section from cheat_sheet v5.1 (D9)
     - AUDIT: Claude Opus 4.6 (Cowork audit-only mode)
   ```

---

*Document produced by Claude Opus 4.6 in audit-only mode. No project files were modified.*